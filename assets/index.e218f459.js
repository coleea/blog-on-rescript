import{u as zt,g,a as rt,b as Kt,c as Wt,d as E,m as _,f as A,k as xe,e as he,h as T,i as S,j as h,l as Te,n as Le,o as I,$ as ae,R as J,s as P,p as K,q as Fe,r as Yt,t as nt,v as Ue,w as t,_ as d,x as Xt,y as Qt,z as at,A as Zt,B as it,C as ot,D as er,E as tr,F as rr,G as st,H as nr,I as ar,J as ir,K as or,L as sr,M as ur,N as lr}from"./vendor.396d5340.js";const cr=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}};cr();var dr=60*1e3,fr=60*dr,mr=24*fr,vr=30*mr;function pr(e){return g(rt(document)).cookie.split(";").reduce(function(r,n){var i=n.split("=").map(function(o){return o.trim()}),a=Kt(i,0),s=Wt(i,1);return r.concat([[a,s]])},[])}function gr(e){return zt(pr().find(function(r){var n=r[0];return n===e}))}function ut(e,r,n,i,a){var s=g(rt(document)),o=E(r,""),l=n!==""?"expires="+n+";":"",c=E(_(A(i,function(u){if(u!=="")return u}),function(u){return" path="+u+";"}),""),f=e+"="+o+";"+l+c;s.cookie=f}function lt(e,r){var n=new Date;return n.setTime(n.getTime()+vr),ut(e,r,n.toUTCString(),"/")}function xr(e){return ut(e,void 0,"Thu, 01 Jan 1970 00:00:01 GMT",void 0)}function fe(e){return!e.defaultPrevented&&e.button===0&&!e.altKey&&!e.ctrlKey&&!e.metaKey?!e.shiftKey:!1}function Be(e){var r=String(e.getFullYear()|0),n=String(e.getMonth()|0),i=String(e.getDate()|0);return r+"/"+n+"/"+i}function hr(e){return _(A(e,he),function(r){return xe(r,T)})}var H={decodeArrayString:hr};function ct(e){try{var r=g(S(e)),n=g(A(h(r,"username"),T)),i=A(h(r,"bio"),T),a=g(A(h(r,"image"),T)),s=A(h(r,"following"),Le);return{TAG:0,_0:{username:n,bio:i,image:a,following:s}}}catch{return{TAG:1,_0:"Shape.Author: failed to decode json"}}}var dt={decode:ct};function ft(e){try{var r=g(S(e)),n=g(A(h(r,"slug"),T)),i=g(A(h(r,"title"),T)),a=g(A(h(r,"description"),T)),s=g(A(h(r,"body"),T)),o=g(A(A(h(r,"tagList"),he),function(p){return xe(p,T)})),l=new Date(g(A(h(r,"createdAt"),T))),c=new Date(g(A(h(r,"updatedAt"),T))),f=g(A(h(r,"favorited"),Le)),u=g(A(h(r,"favoritesCount"),Te))|0,m=g(A(h(r,"author"),function(p){var v=ct(p);if(v.TAG===0)return v._0}));return{TAG:0,_0:{slug:n,title:i,description:a,body:s,tagList:o,createdAt:l,updatedAt:c,favorited:f,favoritesCount:u,author:m}}}catch{return{TAG:1,_0:"Shape.Article: failed to decode json"}}}var mt={decode:ft};function Ar(e){try{var r=g(S(e)),n=g(A(A(h(r,"articles"),he),function(a){return xe(a,function(s){var o=ft(s);if(o.TAG===0)return o._0})})),i=g(_(A(h(r,"articlesCount"),Te),function(a){return a|0}));return{TAG:0,_0:{articles:n,articlesCount:i}}}catch{return{TAG:1,_0:"Shape.Article: failed to decode json"}}}var vt={decode:Ar};function Er(e){try{var r=g(S(e)),n=g(_(A(h(r,"tags"),he),function(i){return xe(i,T)}));return{TAG:0,_0:n}}catch{return{TAG:1,_0:"Shape.Tags: failed to decode json"}}}var _r={decode:Er},kr=new Date,yr=new Date,br={id:0,email:"",createdAt:kr,updatedAt:yr,username:"",bio:void 0,image:void 0,token:""};function pt(e){try{var r=g(S(e)),n=g(_(A(h(r,"id"),Te),function(u){return u|0})),i=g(A(h(r,"email"),T)),a=g(_(A(h(r,"createdAt"),T),function(u){return new Date(u)})),s=g(_(A(h(r,"updatedAt"),T),function(u){return new Date(u)})),o=g(A(h(r,"username"),T)),l=A(h(r,"bio"),T),c=A(h(r,"image"),T),f=g(A(h(r,"token"),T));return{TAG:0,_0:{id:n,email:i,createdAt:a,updatedAt:s,username:o,bio:l,image:c,token:f}}}catch{return{TAG:1,_0:"Shape.User: failed to decode json"}}}function Tr(e){try{var r=g(S(e)),n=g(A(h(r,"user"),function(i){var a=pt(i);if(a.TAG===0)return a._0}));return{TAG:0,_0:n}}catch{return{TAG:1,_0:"Shape.User: failed to decode json"}}}var Ae={empty:br,decodeUser:pt,decode:Tr};function Nr(e){try{var r=g(S(e)),n=g(A(h(r,"username"),T)),i=A(h(r,"bio"),T),a=g(A(h(r,"image"),T)),s=g(A(h(r,"following"),Le));return{TAG:0,_0:{username:n,bio:i,image:a,following:s}}}catch{return{TAG:1,_0:"Shape.CommentUser: failed to decode json"}}}function gt(e){try{var r=g(S(e)),n=g(_(A(h(r,"id"),Te),function(l){return l|0})),i=g(_(A(h(r,"createdAt"),T),function(l){return new Date(l)})),a=g(_(A(h(r,"updatedAt"),T),function(l){return new Date(l)})),s=g(A(h(r,"body"),T)),o=g(A(h(r,"author"),function(l){var c=Nr(l);if(c.TAG===0)return c._0}));return{TAG:0,_0:{id:n,createdAt:i,updatedAt:a,body:s,author:o}}}catch{return{TAG:1,_0:"Shape.Comment: failed to decode json"}}}function Gr(e){try{var r=g(S(e)),n=g(_(A(h(r,"comments"),he),function(i){return xe(i,function(a){var s=gt(a);if(s.TAG===0)return s._0})}));return{TAG:0,_0:n}}catch{return{TAG:1,_0:"Shape.Comment: failed to decode json"}}}var xt={decodeComment:gt,decode:Gr};function Cr(e){try{var r=g(S(e)),n=H.decodeArrayString(h(r,"email")),i=H.decodeArrayString(h(r,"bio")),a=H.decodeArrayString(h(r,"image")),s=H.decodeArrayString(h(r,"username")),o=H.decodeArrayString(h(r,"password"));return{TAG:0,_0:{email:n,bio:i,image:a,username:s,password:o}}}catch{return{TAG:1,_0:"Shape.Settings: failed to decode json"}}}var wr={decode:Cr};function Sr(e){try{var r=g(S(e)),n=H.decodeArrayString(h(r,"title")),i=H.decodeArrayString(h(r,"body")),a=H.decodeArrayString(h(r,"description"));return{TAG:0,_0:{title:n,body:i,description:a}}}catch{return{TAG:1,_0:"Shape.Editor: failed to decode json"}}}var Pr={decode:Sr};function Dr(e){try{return{TAG:0,_0:H.decodeArrayString(h(g(S(e)),"email or password"))}}catch{return{TAG:1,_0:"Shape.Login: failed to decode json"}}}var $r={decode:Dr};function Rr(e){try{var r=g(S(e)),n=H.decodeArrayString(h(r,"email")),i=H.decodeArrayString(h(r,"username")),a=H.decodeArrayString(h(r,"password"));return{TAG:0,_0:{email:n,password:a,username:i}}}catch{return{TAG:1,_0:"Shape.Register: failed to decode json"}}}var Lr={decode:Rr};function ht(e){return{TAG:0,_0:e}}function $(e){return e.TAG===0?e:{TAG:1,_0:{TAG:1,_0:e._0}}}function Fr(e,r,n,i,a,s){var o=e!==void 0?e:10,l=r!==void 0?r:0,c=String(o),f=String(l),u=E(_(n,function(v){return"&tag="+v}),""),m=E(_(i,function(v){return"&author="+v}),""),p=E(_(a,function(v){return"&favorited="+v}),"");return window.app.backend+"/api/articles?limit="+c+"&offset="+f+u+m+p}function Ur(e,r){return window.app.backend+"/api/articles/"+e}function Br(e,r){return window.app.backend+"/api/articles/"+e+"/favorite"}function Ir(e,r,n){var i=e!==void 0?e:10,a=r!==void 0?r:0,s=String(i),o=String(a);return window.app.backend+"/api/articles/feed?limit="+s+"&offset="+o}function Or(e,r){return window.app.backend+"/api/articles/"+e+"/comments"}function Mr(e,r,n){var i=String(r);return window.app.backend+"/api/articles/"+e+"/comments/"+i}var oe={root:Fr,article:Ur,favorite:Br,feed:Ir,comments:Or,comment:Mr};function qr(e,r){return window.app.backend+"/api/profiles/"+e}function Jr(e,r){return window.app.backend+"/api/profiles/"+e+"/follow"}var At={profile:qr,follow:Jr},Hr=window.app.backend+"/api/users",Vr=window.app.backend+"/api/users/login",Et={root:Hr,login:Vr},jr=window.app.backend+"/api/tags",_t=window.app.backend+"/api/user";function j(e){return E(_(A(gr("jwtToken"),function(r){return r[1]}),function(r){return[["Authorization","Token "+r]]}),[])}function Ne(e){if(e.TAG===0)return Promise.resolve(e);var r=e._0;return r.json().then(function(n){var i=r.status,a=r.statusText,s={NAME:"json",VAL:n};return Promise.resolve({TAG:1,_0:ht([i,a,s])})})}function W(e){if(e.TAG===0)return Promise.resolve(e);var r=e._0,n=r.status,i=r.statusText;return Promise.resolve({TAG:1,_0:ht([n,i,{NAME:"text",VAL:"FIXME: show body text instead"}])})}function O(e){return e.ok?ae(e.json().then(function(r){return Promise.resolve({TAG:0,_0:r})}),function(r){return Promise.resolve({TAG:1,_0:e})}):Promise.resolve({TAG:1,_0:e})}function Ge(e,r){var n,i=0,a;switch(e.TAG|0){case 0:a=e._0,i=1;break;case 2:a=e._1,i=1;break;case 1:case 3:n=void 0;break}if(i===1){var s=K({hd:["title",a.title],tl:{hd:["description",a.description],tl:{hd:["body",a.body],tl:{hd:["tagList",a.tagList],tl:0}}}});n=P(JSON.stringify(K({hd:["article",s],tl:0})))}var o;switch(e.TAG|0){case 0:o=2;break;case 1:o=0;break;case 2:o=3;break;case 3:o=4;break}var l;switch(e.TAG|0){case 0:case 2:l=[["Content-Type","application/json; charset=UTF-8"]];break;case 1:case 3:l=[];break}var c=Fe(l,j()),f;return f=e.TAG===0?"":e._0,fetch(oe.article(f,void 0),J.make(o,P(c),n,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0)).then(O).then(Ne).then(function(u){return Promise.resolve(I(u,function(m){try{return $(mt.decode(g(h(g(S(m)),"article"))))}catch{return $({TAG:1,_0:"API.article: failed to decode json"})}}))})}function kt(e,r){var n;n=e.TAG===0?2:4;var i=J.make(n,P(j()),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(oe.favorite(e._0,void 0),i).then(O).then(W).then(function(a){return Promise.resolve(I(a,function(s){try{return $(mt.decode(g(h(g(S(s)),"article"))))}catch{return $({TAG:1,_0:"API.favoriteArticle: failed to decode json"})}}))})}function Ce(e,r,n,i,a,s){var o=e!==void 0?e:10,l=r!==void 0?r:0,c=J.make(void 0,P(j()),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(oe.root(o,l,n,i,a,void 0),c).then(O).then(W).then(function(f){return Promise.resolve(I(f,function(u){return $(vt.decode(u))}))})}function zr(e,r,n){var i=e!==void 0?e:10,a=r!==void 0?r:0,s=J.make(void 0,P(j()),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(oe.feed(i,a,void 0),s).then(O).then(W).then(function(o){return Promise.resolve(I(o,function(l){return $(vt.decode(l))}))})}function Kr(e){return fetch(jr).then(O).then(W).then(function(r){return Promise.resolve(I(r,function(n){return $(_r.decode(n))}))})}function Wr(e){var r=J.make(void 0,P(j()),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(_t,r).then(O).then(W).then(function(n){return Promise.resolve(I(n,function(i){return $(Ae.decode(i))}))})}function Yr(e,r,n){var i=K(Yt({hd:{hd:["email",e.email],tl:0},tl:{hd:{hd:["bio",E(e.bio,"")],tl:0},tl:{hd:{hd:["image",E(e.image,"")],tl:0},tl:{hd:{hd:["username",e.username],tl:0},tl:{hd:r===""?0:{hd:["password",r],tl:0},tl:0}}}}})),a=JSON.stringify(K({hd:["user",i],tl:0})),s=J.make(3,P(Fe(j(),[["Content-Type","application/json; charset=UTF-8"]])),P(a),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(_t,s).then(O).then(Ne).then(function(o){return Promise.resolve(I(o,function(l){return $(Ae.decode(l))}))})}function yt(e,r){var n;n=e.TAG===0?2:4;var i=J.make(n,P(j()),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(At.follow(e._0,void 0),i).then(O).then(W).then(function(a){return Promise.resolve(I(a,function(s){try{return $(dt.decode(g(h(g(S(s)),"profile"))))}catch{return $({TAG:1,_0:"API.followUser: failed to decode json"})}}))})}function Xr(e,r){var n=J.make(void 0,P(j()),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(oe.comments(e,void 0),n).then(O).then(W).then(function(i){return Promise.resolve(I(i,function(a){return $(xt.decode(a))}))})}function Qr(e,r,n){var i=J.make(4,P(j()),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(oe.comment(e,r,void 0),i).then(O).then(W).then(function(a){return Promise.resolve(I(a,function(s){return{TAG:0,_0:[e,r]}}))})}function Zr(e,r,n){var i=K({hd:["body",r],tl:0}),a=JSON.stringify(K({hd:["comment",i],tl:0})),s=J.make(2,P(Fe(j(),[["Content-Type","application/json; charset=UTF-8"]])),P(a),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(oe.comments(e,void 0),s).then(O).then(W).then(function(o){return Promise.resolve(I(o,function(l){try{return $(xt.decodeComment(g(h(g(S(l)),"comment"))))}catch{return $({TAG:1,_0:"API.addComment: failed to decode json"})}}))})}function en(e,r){var n=J.make(void 0,P(j()),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(At.profile(e,void 0),n).then(O).then(W).then(function(i){return Promise.resolve(I(i,function(a){try{return $(dt.decode(g(h(g(S(a)),"profile"))))}catch{return $({TAG:1,_0:"API.getProfile: failed to decode json"})}}))})}function tn(e,r,n){var i=K({hd:["email",e],tl:{hd:["password",r],tl:0}}),a=JSON.stringify(K({hd:["user",i],tl:0})),s=J.make(2,[["Content-Type","application/json; charset=UTF-8"]],P(a),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(Et.login,s).then(O).then(Ne).then(function(o){return Promise.resolve(I(o,function(l){return $(Ae.decode(l))}))})}function rn(e,r,n,i){var a=K({hd:["email",r],tl:{hd:["password",n],tl:{hd:["username",e],tl:0}}}),s=JSON.stringify(K({hd:["user",a],tl:0})),o=J.make(2,[["Content-Type","application/json; charset=UTF-8"]],P(s),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)(void 0);return fetch(Et.root,o).then(O).then(Ne).then(function(l){return Promise.resolve(I(l,function(c){return $(Ae.decode(c))}))})}function we(e){return{TAG:1,_0:e}}function w(e){return{TAG:0,_0:e}}function nn(e){return"/#/editor/"+e}function Ie(e){return"/#/article/"+e}function Y(e){return"/#/profile/"+e}function an(e){return"/#/profile/"+e+"/favorites"}var se=nt;function bt(e,r){return e?r:{TAG:1,_0:function(n){}}}function Tt(e,r){e.TAG===0?fe(r)&&(r.preventDefault(),nt(e._0)):d(e._0,void 0)}function on(e){var r=e.className,n=e.style,i=e.onClick,a=e.children,s=r!==void 0?r:"",o=n!==void 0?Ue(n):{},l;l=i.TAG===0?i._0:void 0;var c={className:s,style:o,onClick:function(f){return Tt(i,f)}};return l!==void 0&&(c.href=Ue(l)),t.exports.createElement("a",c,a)}function sn(e){var r=e.className,n=e.style,i=e.onClick,a=e.disabled,s=e.children,o=r!==void 0?r:"",l=n!==void 0?Ue(n):{},c=a!==void 0?a:!1;return t.exports.createElement("button",{className:o,style:l,disabled:c,onClick:function(f){return Tt(i,f)}},s)}var Ee={make:sn},ie="/",Nt="/#/settings",ue="/#/register",Oe="/#/login",un="/#/editor",N=on;function Gt(e){return{TAG:0,_0:e}}function le(e){return typeof e=="number"?e!==0:e.TAG===0}function ln(e){return!(typeof e=="number"||e.TAG!==1)}function re(e){return typeof e=="number"?e===0?1:e:e.TAG===0?e:{TAG:0,_0:e._0}}function y(e){return{TAG:1,_0:e}}function X(e){if(typeof e!="number")return P(e._0)}function U(e,r){return typeof e=="number"?e===0?0:1:e.TAG===0?{TAG:0,_0:d(r,e._0)}:{TAG:1,_0:d(r,e._0)}}function cn(e,r){return typeof e=="number"||e.TAG!==1||d(r,e._0),e}function M(e){return typeof e=="number"?e===0?e:0:e.TAG===0?{TAG:1,_0:e._0}:e}var _e=0;function ce(e){return y({TAG:0,_0:e})}function me(e){return y({TAG:1,_0:e})}function dn(e){return Gt({TAG:0,_0:e})}function R(e){if(typeof e!="number"){if(e.TAG===0){var r=e._0;return r.TAG===0?P(r._0):void 0}var n=e._0;if(n.TAG===0)return P(n._0)}}function ne(e,r){if(typeof e=="number")return e===0?0:1;if(e.TAG===0){var n=e._0;if(n.TAG!==0)return e;var i=d(r,n._0);return Gt({TAG:0,_0:i})}var a=e._0;if(a.TAG!==0)return e;var s=d(r,a._0);return y({TAG:0,_0:s})}var ve=_e,de=re,pe=le,Se=M;function fn(e){var r=t.exports.useState(function(){return ve}),n=r[1];return t.exports.useEffect(function(){d(n,de);var i;switch(e.TAG|0){case 0:i=Ce(e._1,e._2,e._0,void 0,void 0);break;case 1:i=Ce(e._0,e._1,void 0,void 0,void 0);break;case 2:i=zr(e._0,e._1);break}i.then(function(a){return Promise.resolve(d(n,function(s){return a.TAG===0?ce(a._0):me(a._0)}))})},[e,n]),[r[0],n]}function mn(e){var r=t.exports.useState(function(){return ve}),n=r[1];return t.exports.useEffect(function(){d(n,de);var i;i=e.TAG===0?Ce(e._1,e._2,void 0,e._0,void 0):Ce(e._1,e._2,void 0,void 0,e._0),i.then(function(a){return Promise.resolve(d(n,function(s){return a.TAG===0?ce(a._0):me(a._0)}))})},[e,n]),[r[0],n]}function vn(e){var r=t.exports.useState(function(){return ve}),n=r[1];return t.exports.useEffect(function(){d(n,function(i){return dn(E(R(i),[]))}),Kr().then(function(i){return Promise.resolve(d(n,function(a){return i.TAG===0?ce(i._0):me(i._0)}))})},[]),r[0]}function pn(e){var r=t.exports.useState(function(){return _e}),n=r[1];return t.exports.useEffect(function(){d(n,re),ae(Wr().then(function(i){return Promise.resolve(d(n,function(a){return i.TAG===0?y(i._0):y(void 0)}))}),function(i){return Promise.resolve(d(n,function(a){return y(void 0)}))})},[]),[r[0],n]}function Ct(e){var r=t.exports.useState(function(){return ve}),n=r[1];return t.exports.useEffect(function(){d(n,de),Ge({TAG:1,_0:e}).then(function(i){return Promise.resolve(d(n,function(a){if(i.TAG!==0)return me(i._0);var s=i._0;return ce([s,s.tagList.join(","),void 0])}))})},[e]),[r[0],n]}function gn(e){var r=t.exports.useState(function(){return ve}),n=r[1],i=t.exports.useState(function(){}),a=i[1];t.exports.useEffect(function(){d(n,de),d(a,function(o){}),Xr(e).then(function(o){return Promise.resolve(d(n,function(l){return o.TAG===0?ce(o._0):me(o._0)}))})},[e,n]);var s=function(o,l){d(a,function(c){return Xt(c,l)}),Qr(o,l).then(function(c){if(d(a,function(u){return Qt(u,l)}),c.TAG===0){var f=c._0[1];d(n,function(u){return ne(u,function(m){return at(m,function(p){return p.id!==f})})})}return Promise.resolve(void 0)})};return[r[0],i[0],s,n]}function xn(e,r){var n=t.exports.useState(function(){return _e}),i=n[1],a=n[0],s=a===0?E(_(R(e),function(l){return y([l.author.username,E(l.author.following,!1)])}),y(["",!1])):a,o=r!==void 0?{TAG:1,_0:function(l){var c=E(_(X(s),function(u){return u[0]}),""),f=E(A(X(s),function(u){if(u[1])return{TAG:1,_0:c}}),{TAG:0,_0:c});d(i,function(u){return re(s)}),ae(yt(f).then(function(u){return Promise.resolve(d(i,function(m){if(u.TAG!==0)return y(["",!1]);var p=u._0;return y([p.username,E(p.following,!1)])}))}),function(u){return Promise.resolve(d(i,function(m){return y(["",!1])}))})}}:{TAG:0,_0:ue};return[s,o]}function hn(e,r){var n=t.exports.useState(function(){return _e}),i=n[1],a=n[0],s=a===0?E(_(R(e),function(l){return y([l.username,E(l.following,!1)])}),y(["",!1])):a,o=r!==void 0?{TAG:1,_0:function(l){var c=E(_(X(s),function(u){return u[0]}),""),f=E(A(X(s),function(u){if(u[1])return{TAG:1,_0:c}}),{TAG:0,_0:c});d(i,function(u){return re(s)}),ae(yt(f).then(function(u){return Promise.resolve(d(i,function(m){if(u.TAG!==0)return y(["",!1]);var p=u._0;return y([p.username,E(p.following,!1)])}))}),function(u){return Promise.resolve(d(i,function(m){return y(["",!1])}))})}}:{TAG:0,_0:ue};return[s,o]}function An(e,r){var n=t.exports.useState(function(){return _e}),i=n[1],a=n[0],s=a===0?E(_(R(e),function(l){return y([l.favorited,l.favoritesCount,l.slug])}),y([!1,0,""])):a,o=r!==void 0?{TAG:1,_0:function(l){var c=E(X(s),[!1,0,""]),f=c[2],u=c[0]?{TAG:1,_0:f}:{TAG:0,_0:f};d(i,function(m){return re(s)}),ae(kt(u).then(function(m){return Promise.resolve(d(i,function(p){if(m.TAG!==0)return y([!1,0,""]);var v=m._0;return y([v.favorited,v.favoritesCount,v.slug])}))}),function(m){return Promise.resolve(d(i,function(p){return y([!1,0,""])}))})}}:{TAG:0,_0:ue};return[s,o]}function En(e,r){var n=t.exports.useState(function(){return!1}),i=n[1],a=n[0],s,o=0;return r!==void 0&&!a?s={TAG:1,_0:function(l){if(window.confirm("Are you sure you want to delete this article?")){var c=E(_(R(e),function(f){return f.slug}),"");d(i,function(f){return!0}),ae(Ge({TAG:3,_0:c}).then(function(f){return d(i,function(u){return!1}),se(ie),Promise.resolve(void 0)}),function(f){return Promise.resolve(d(i,function(u){return!1}))});return}}}:o=1,o===1&&(s={TAG:1,_0:function(l){}}),[a,s]}function wt(e,r){var n=t.exports.useState(function(){}),i=n[1],a=function(s){if(r!==void 0){var o=s._0;d(i,function(l){return Zt(l,o)}),ae(kt(s).then(function(l){return d(i,function(c){return it(c,o)}),l.TAG===0&&d(e,function(c){return ne(c,function(f){return{articles:ot(f.articles,function(u){if(u.slug!==o)return u;var m;m=s.TAG===0;var p;return p=s.TAG===0?u.favoritesCount+1|0:u.favoritesCount-1|0,{slug:u.slug,title:u.title,description:u.description,body:u.body,tagList:u.tagList,createdAt:u.createdAt,updatedAt:u.updatedAt,favorited:m,favoritesCount:p,author:u.author}}),articlesCount:f.articlesCount}})}),Promise.resolve(void 0)}),function(l){return Promise.resolve(d(i,function(c){return it(c,o)}))});return}else return se(ue)};return[n[0],a]}function _n(e){var r=t.exports.useState(function(){return ve}),n=r[1];return t.exports.useEffect(function(){d(n,de),en(e).then(function(i){return Promise.resolve(d(n,function(a){return i.TAG===0?ce(i._0):me(i._0)}))})},[e,n]),r[0]}function kn(e){var r=t.exports.useState(function(){}),n=r[1],i=E(r[0],e);t.exports.useEffect(function(){d(n,function(s){})},[e,n]);var a=function(s){return d(n,function(o){var l;return l=i.TAG===0?{TAG:0,_0:i._0,_1:i._1,_2:s}:{TAG:1,_0:i._0,_1:i._1,_2:s},l})};return[i,a]}function yn(e){return t.exports.createElement("div",{className:"lds-ring"},t.exports.createElement("div",void 0),t.exports.createElement("div",void 0),t.exports.createElement("div",void 0),t.exports.createElement("div",void 0))}var ke=yn;function bn(e){var r=e.user,n=e.children;return r!==void 0?null:n}var Tn={make:bn};function Nn(e){var r=e.user,n=e.children;return r!==void 0?n:null}var St={make:Nn};function Gn(e){var r=e.id,n=e.children;return t.exports.cloneElement(n,{"data-testid":r})}var Me=Gn;function Cn(e){var r=e.limit,n=e.offset,i=e.total,a=e.onClick;if(i===0)return null;var s=rr(i/r)-1|0;return t.exports.createElement(Me,{id:"page-link",children:t.exports.createElement("ul",{className:"pagination"},er(0,s).map(function(o){var l=n===0&&o===0||o===tr(n,r)?"page-item active":"page-item";return t.exports.createElement("li",{key:String(o),className:l},t.exports.createElement("a",{className:"page-link",href:"#"+String(o),onClick:function(c){if(fe(c))return c.preventDefault(),d(a,Math.imul(o,r))}},String(o+1|0)))}))})}var Pt=Cn;function wn(e){var r=e.data,n=e.onClick,i,a=0,s;if(typeof r=="number")i=r===0?"Initilizing...":"Loading...";else if(r.TAG===0){var o=r._0;o.TAG===0?(s=o._0,a=1):i="ERROR"}else{var l=r._0;l.TAG===0?(s=l._0,a=1):i="ERROR"}return a===1&&(i=s.map(function(c){return t.exports.createElement("a",{key:c,className:"tag-pill tag-default",href:"#",onClick:function(f){if(fe(f)){f.preventDefault(),d(n,c);return}}},c)})),t.exports.createElement(t.exports.Fragment,void 0,t.exports.createElement("p",void 0,"Popular Tags"),t.exports.createElement(Me,{id:"tag-list",children:t.exports.createElement("div",{className:"tag-list"},i)}))}var Sn=wn;function Pn(e){var r=e.data,n=e.onToggleFavorite,i=e.isFavoriteBusy;return t.exports.createElement("div",{className:"article-preview"},t.exports.createElement("div",{className:"article-meta"},t.exports.createElement(N,{onClick:w(Y(r.author.username)),children:t.exports.createElement("img",{src:r.author.image})}),t.exports.createElement("div",{className:"info"},t.exports.createElement(N,{className:"author",onClick:w(Y(r.author.username)),children:r.author.username}),t.exports.createElement("span",{className:"date"},r.createdAt.toLocaleString())),t.exports.createElement("button",{className:r.favorited?"btn btn-primary btn-sm pull-xs-right":"btn btn-outline-primary btn-sm pull-xs-right",disabled:i,onClick:function(a){return d(n,r.favorited?{TAG:1,_0:r.slug}:{TAG:0,_0:r.slug})}},t.exports.createElement("i",{className:i?"ion-load-a":"ion-heart",style:{marginRight:"3px"}}),r.favoritesCount.toString())),t.exports.createElement(N,{className:"preview-link",onClick:w(Ie(r.slug)),children:null},t.exports.createElement("h1",void 0,r.title),t.exports.createElement("p",void 0,r.description),t.exports.createElement("span",void 0,"Read more...")))}var Dn=Pn;function $n(e){return t.exports.useState(function(){return e!==void 0?{TAG:2,_0:10,_1:0}:{TAG:1,_0:10,_1:0}})}function Rn(e){var r=e.user,n=$n(r),i=n[1],a=n[0],s=fn(a),o=s[0],l=vn(),c=wt(s[1],r),f=c[1],u=c[0],m;switch(a.TAG|0){case 0:case 1:m="nav-link";break;case 2:m="nav-link active";break}var p;switch(a.TAG|0){case 1:p="nav-link active";break;case 0:case 2:p="nav-link";break}var v;switch(a.TAG|0){case 0:v=t.exports.createElement("li",{className:"nav-item"},t.exports.createElement("a",{className:"nav-link active",href:"#",onClick:function(b){b.preventDefault()}},t.exports.createElement("i",{className:"ion-pound"})," ",a._0));break;case 1:case 2:v=null;break}var x,G=0,D;if(typeof o=="number")x=null;else if(o.TAG===0){var L=o._0;L.TAG===0?(D=L._0.articles,G=1):x="ERROR"}else{var C=o._0;C.TAG===0?(D=C._0.articles,G=1):x="ERROR"}G===1&&(x=D.map(function(b){return t.exports.createElement(Dn,{data:b,onToggleFavorite:f,isFavoriteBusy:st(u,b.slug),key:b.slug})}));var B,V=0,Q,Z;switch(a.TAG|0){case 0:Q=a._1,Z=a._2,V=1;break;case 1:case 2:Q=a._0,Z=a._1,V=1;break}if(V===1){var F;if(typeof o=="number")F=0;else if(o.TAG===0){var ee=o._0;F=ee.TAG===0?ee._0.articlesCount:0}else{var te=o._0;F=te.TAG===0?te._0.articlesCount:0}B=t.exports.createElement(Pt,{limit:Q,offset:Z,total:F,onClick:function(b){return d(i,function(q){switch(q.TAG|0){case 0:return{TAG:0,_0:q._0,_1:q._1,_2:b};case 1:return{TAG:1,_0:q._0,_1:b};case 2:return{TAG:2,_0:q._0,_1:b}}})}})}return t.exports.createElement("div",{className:"home-page"},t.exports.createElement("div",{className:"banner"},t.exports.createElement("div",{className:"container"},t.exports.createElement("h1",{className:"logo-font"},"conduit"),t.exports.createElement("p",void 0,"A place to share your knowledge."))),t.exports.createElement("div",{className:"container page"},t.exports.createElement("div",{className:"row"},t.exports.createElement("div",{className:"col-md-9"},t.exports.createElement(Me,{id:"feed-toggle",children:t.exports.createElement("div",{className:"feed-toggle"},t.exports.createElement("ul",{className:"nav nav-pills outline-active"},t.exports.createElement(St.make,{user:r,children:t.exports.createElement("li",{className:"nav-item"},t.exports.createElement("a",{className:m,href:"#your_feed",onClick:function(b){if(fe(b))return b.preventDefault(),d(i,function(q){return{TAG:2,_0:10,_1:0}})}},"Your Feed"))}),t.exports.createElement("li",{className:"nav-item"},t.exports.createElement("a",{className:p,href:"#global",onClick:function(b){if(fe(b))return b.preventDefault(),d(i,function(q){return{TAG:1,_0:10,_1:0}})}},"Global Feed")),v,pe(o)?t.exports.createElement("li",{className:"nav-item"},t.exports.createElement(ke,{})):null))}),x,B),t.exports.createElement("div",{className:"col-md-3"},t.exports.createElement("div",{className:"sidebar"},t.exports.createElement(Sn,{data:l,onClick:function(b){return d(i,function(q){switch(q.TAG|0){case 0:return{TAG:0,_0:b,_1:q._1,_2:q._2};case 1:case 2:return{TAG:0,_0:b,_1:10,_2:0}}})}}))))))}var Ln=Rn;function Fn(e){var r=e.setUser,n=t.exports.useState(function(){return y(["","",void 0])}),i=n[1],a=n[0],s=le(a),o=E(X(a),["","",void 0]),l=o[2],c=o[1],f=o[0];return t.exports.createElement("div",{className:"auth-page"},t.exports.createElement("div",{className:"container page"},t.exports.createElement("div",{className:"row"},t.exports.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},t.exports.createElement("h1",{className:"text-xs-center"},"Sign in"),t.exports.createElement("p",{className:"text-xs-center"},t.exports.createElement(N,{onClick:w(ue),children:"Need an account?"})),l!==void 0?t.exports.createElement("ul",{className:"error-messages"},l.map(function(u){return t.exports.createElement("li",{key:u},"email or password "+u)})):null,t.exports.createElement("form",void 0,t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control form-control-lg",disabled:s,placeholder:"Email",type:"text",value:f,onChange:function(u){var m=u.target.value;return d(i,function(p){return U(p,function(v){return[m,v[1],v[2]]})})}})),t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control form-control-lg",disabled:s,placeholder:"Password",type:"password",value:c,onChange:function(u){var m=u.target.value;return d(i,function(p){return U(p,function(v){return[v[0],m,v[2]]})})}})),t.exports.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",disabled:s,onClick:function(u){u.preventDefault(),u.stopPropagation(),d(i,re),tn(f,c).then(function(m){if(m.TAG===0){var p=m._0;d(r,function(L){return y(p)}),d(i,M),lt("jwtToken",p.token),se(ie)}else{var v=m._0;if(v.TAG===0){var x=v._0[2];if(x.NAME==="text")d(i,M);else try{var G=$r.decode(g(h(g(S(x.VAL)),"errors")));if(G.TAG===0){var D=G._0;d(i,function(L){return U(M(L),function(C){return[C[0],C[1],D]})})}}catch{console.log("Button.SignIn: failed to decode json")}}else d(i,M)}return Promise.resolve(void 0)})}},"Sign in"))))))}var Un=Fn;function Bn(e){var r=nr(void 0),n=r.hash.split("/"),i=n.length;if(i>=5)return 0;switch(i){case 0:case 1:return 0;case 2:var a=n[0];if(a!=="")return 0;var s=n[1];switch(s){case"editor":return 3;case"login":return 1;case"register":return 2;case"settings":return 4;default:return 0}case 3:var o=n[0];if(o!=="")return 0;var l=n[1];switch(l){case"article":var c=n[2];return{TAG:1,_0:c};case"editor":var f=n[2];return{TAG:0,_0:f};case"profile":var u=n[2];return{TAG:2,_0:u};default:return 0}case 4:var m=n[0];if(m!=="")return 0;var p=n[1];if(p!=="profile")return 0;var v=n[2],x=n[3];return x==="favorites"?{TAG:3,_0:v}:0}}function In(e){var r=e.label,n=e.error;return E(_(n,function(i){return i.map(function(a){return t.exports.createElement("li",{key:a},r+" "+a)})}),null)}var z=In;function Dt(e){return at(ot(e.split(","),function(r){return r.trim()}),function(r){return r.length>0})}function $t(e){var r=e.data,n=e.setData,i=e.onSubmit,a=pe(r),s=A(R(r),function(o){return o[2]});return t.exports.createElement(t.exports.Fragment,void 0,s!==void 0?t.exports.createElement("ul",{className:"error-messages"},t.exports.createElement(z,{label:"title",error:s.title}),t.exports.createElement(z,{label:"body",error:s.body}),t.exports.createElement(z,{label:"description",error:s.description})):null,t.exports.createElement("form",void 0,t.exports.createElement("fieldset",void 0,t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control form-control-lg",disabled:a,placeholder:"Article Title",type:"text",value:E(_(R(r),function(o){return o[0].title}),""),onChange:function(o){var l=o.target.value;return d(n,function(c){return ne(c,function(f){var u=f[0];return[{slug:u.slug,title:l,description:u.description,body:u.body,tagList:u.tagList,createdAt:u.createdAt,updatedAt:u.updatedAt,favorited:u.favorited,favoritesCount:u.favoritesCount,author:u.author},f[1],f[2]]})})}})),t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control",disabled:a,placeholder:"What's this article about?",type:"text",value:E(_(R(r),function(o){return o[0].description}),""),onChange:function(o){var l=o.target.value;return d(n,function(c){return ne(c,function(f){var u=f[0];return[{slug:u.slug,title:u.title,description:l,body:u.body,tagList:u.tagList,createdAt:u.createdAt,updatedAt:u.updatedAt,favorited:u.favorited,favoritesCount:u.favoritesCount,author:u.author},f[1],f[2]]})})}})),t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("textarea",{className:"form-control",disabled:a,placeholder:"Write your article (in markdown)",rows:8,value:E(_(R(r),function(o){return o[0].body}),""),onChange:function(o){var l=o.target.value;return d(n,function(c){return ne(c,function(f){var u=f[0];return[{slug:u.slug,title:u.title,description:u.description,body:l,tagList:u.tagList,createdAt:u.createdAt,updatedAt:u.updatedAt,favorited:u.favorited,favoritesCount:u.favoritesCount,author:u.author},f[1],f[2]]})})}})),t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control",disabled:a,placeholder:"Enter tags",type:"text",value:E(_(R(r),function(o){return o[1]}),""),onChange:function(o){var l=o.target.value;return d(n,function(c){return ne(c,function(f){return[f[0],l,f[2]]})})}}),t.exports.createElement("div",{className:"tag-list"})),t.exports.createElement("button",{className:"btn btn-lg pull-xs-right btn-primary",disabled:a,type:"button",onClick:function(o){if(o.preventDefault(),o.stopPropagation(),!a){var l=R(r);if(l!==void 0){d(i,[l[0],l[1]]);return}}}},"Publish Article"))))}var On={slug:"",title:"",description:"",body:"",tagList:[],createdAt:new Date,updatedAt:new Date,favorited:!1,favoritesCount:0,author:{username:"",bio:void 0,image:"",following:!1}},Mn=[On,"",void 0];function qn(e){var r=t.exports.useState(function(){return ce(Mn)}),n=r[1];return t.exports.createElement($t,{data:r[0],setData:n,onSubmit:function(i){var a=i[0];d(n,de),Ge({TAG:0,_0:{slug:a.slug,title:a.title,description:a.description,body:a.body,tagList:Dt(i[1]),createdAt:a.createdAt,updatedAt:a.updatedAt,favorited:a.favorited,favoritesCount:a.favoritesCount,author:a.author}}).then(function(s){if(s.TAG===0)se(Ie(s._0.slug)),d(n,Se);else{var o=s._0;if(o.TAG===0){var l=o._0[2];if(l.NAME==="text")d(n,Se);else try{var c=Pr.decode(g(h(g(S(l.VAL)),"errors")));if(c.TAG===0){var f=c._0;d(n,function(u){return ne(M(u),function(m){return[m[0],m[1],f]})})}}catch{console.log("Button.UpdateSettings: failed to decode json")}}else d(n,Se)}return Promise.resolve(void 0)})}})}function Jn(e){var r=e.slug,n=Ct(r),i=n[1];return t.exports.createElement($t,{data:n[0],setData:i,onSubmit:function(a){var s=a[0];d(i,de),Ge({TAG:2,_0:r,_1:{slug:s.slug,title:s.title,description:s.description,body:s.body,tagList:Dt(a[1]),createdAt:s.createdAt,updatedAt:s.updatedAt,favorited:s.favorited,favoritesCount:s.favoritesCount,author:s.author}}).then(function(o){return d(i,Se),Promise.resolve(void 0)})}})}function Hn(e){var r=e.slug;return t.exports.createElement("div",{className:"editor-page"},t.exports.createElement("div",{className:"container page"},t.exports.createElement("div",{className:"row"},t.exports.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},r!==void 0?t.exports.createElement(Jn,{slug:r}):t.exports.createElement(qn,{})))))}var Rt=Hn;function Vn(e){return t.exports.createElement(t.exports.Fragment,void 0,t.exports.createElement("a",{style:{background:"linear-gradient(#485563, #29323c)",bottom:"0",color:"#fff",display:"block",fontSize:"1.5rem",padding:"15px",position:"fixed",textAlign:"center",width:"100%",zIndex:"999",boxShadow:"0 5px 5px 5px rgba(0,0,0,0.4)"},href:"https://github.com/jihchi/rescript-react-realworld-example-app",target:"_blank"},t.exports.createElement("i",{className:"ion-social-github",style:{marginRight:"8px"}}),"Fork on GitHub"),t.exports.createElement("footer",void 0,t.exports.createElement("div",{className:"container"},t.exports.createElement(N,{className:"logo-font",onClick:w(ie),children:"conduit"}),t.exports.createElement("span",{className:"attribution"},"An interactive learning project from ",t.exports.createElement("a",{href:"https://thinkster.io"},"Thinkster"),". Code &amp; design licensed under MIT."))))}var jn=Vn;function zn(e){var r=e.user,n=E(r,Ae.empty);return t.exports.createElement("nav",{className:"navbar navbar-light"},t.exports.createElement("div",{className:"container"},t.exports.createElement(N,{className:"navbar-brand",onClick:w(ie),children:"conduit"}),t.exports.createElement("ul",{className:"nav navbar-nav pull-xs-right"},t.exports.createElement("li",{className:"nav-item"},t.exports.createElement(N,{className:"nav-link active",onClick:w(ie),children:"Home"})),t.exports.createElement(Tn.make,{user:r,children:null},t.exports.createElement("li",{className:"nav-item"},t.exports.createElement(N,{className:"nav-link",onClick:w(Oe),children:"Sign in"})),t.exports.createElement("li",{className:"nav-item"},t.exports.createElement(N,{className:"nav-link",onClick:w(ue),children:"Sign up"}))),t.exports.createElement(St.make,{user:r,children:null},t.exports.createElement("li",{className:"nav-item"},t.exports.createElement(N,{className:"nav-link",onClick:w(un),children:null},t.exports.createElement("i",{className:"ion-compose"})," New Post")),t.exports.createElement("li",{className:"nav-item"},t.exports.createElement(N,{className:"nav-link",onClick:w(Nt),children:null},t.exports.createElement("i",{className:"ion-gear-a"})," Settings")),t.exports.createElement("li",{className:"nav-item"},t.exports.createElement(N,{className:"nav-link",onClick:w(Y(n.username)),children:n.username}))))))}var Kn=zn,Wn=ar(window);function Yn(e){return Wn.sanitize(ir(e))}function Xn(e){var r=e.article;return E(_(_(R(r),function(n){return n.createdAt}),Be),null)}var Lt=Xn;function Qn(e){var r=e.data;return t.exports.createElement("ul",{className:"tag-list"},r.map(function(n){return t.exports.createElement("li",{key:n,className:"tag-default tag-pill tag-outline"},n)}))}var Ft=Qn;function Zn(e){var r=e.slug,n=e.data,i=e.user,a=e.onDeleteClick,s=e.busy,o=0,l;if(typeof n=="number")o=1;else if(n.TAG===0){var c=n._0;c.TAG===0?(l=c._0,o=2):o=1}else{var f=n._0;if(f.TAG!==0)return"ERROR";l=f._0,o=2}switch(o){case 1:return t.exports.createElement(ke,{});case 2:return l.map(function(u){var m=or(s,u.id),p=u.author.image,v=p===""?t.exports.createElement("img",{className:"comment-author-img"}):t.exports.createElement("img",{className:"comment-author-img",src:p});return t.exports.createElement("div",{key:String(u.id),className:"card"},t.exports.createElement("div",{className:"card-block"},t.exports.createElement("p",{className:"card-text"},u.body)),t.exports.createElement("div",{className:"card-footer"},t.exports.createElement(N,{className:"comment-author",style:{marginRight:"7px"},onClick:w(Y(u.author.username)),children:v}),t.exports.createElement(N,{className:"comment-author",onClick:w(Y(u.author.username)),children:u.author.username}),t.exports.createElement("span",{className:"date-posted"},Be(u.createdAt)),t.exports.createElement("span",{className:"mod-options"},null,i!==void 0&&i.username===u.author.username?t.exports.createElement("i",{className:m?"ion-load-a":"ion-trash-a",onClick:function(x){if(!m&&fe(x))return sr(a,r,u.id)}}):null)))})}}var ea=Zn;function ta(e){var r=e.article;return E(_(_(R(r),function(n){return n.author}),function(n){return t.exports.createElement(N,{className:"author",onClick:w(Y(n.username)),children:n.username})}),null)}var Ut=ta;function ra(e){var r=e.data;return E(_(R(r),function(n){return t.exports.createElement(N,{className:"btn btn-outline-secondary btn-sm",onClick:w(nn(n.slug)),children:null},t.exports.createElement("i",{className:"ion-edit",style:{marginRight:"5px"}}),"Edit Article")}),null)}var Bt=ra;function na(e){var r=e.slug,n=e.image,i=e.setComments,a=t.exports.useState(function(){return y("")}),s=a[1],o=a[0],l=E(_(X(o),function(u){return u.trim()!==""}),!1),c=E(X(o),""),f=n===""?t.exports.createElement("img",{className:"comment-author-img"}):t.exports.createElement("img",{className:"comment-author-img",src:n});return t.exports.createElement("form",{className:"card comment-form"},t.exports.createElement("div",{className:"card-block"},t.exports.createElement("textarea",{className:"form-control",disabled:le(o),placeholder:"Write a comment...",rows:3,value:c,onChange:function(u){var m=u.target.value;return d(s,function(p){return y(m)})}})),t.exports.createElement("div",{className:"card-footer"},f,t.exports.createElement("button",{className:"btn btn-sm btn-primary",disabled:!l,onClick:function(u){l&&ln(o)&&(d(s,re),ae(Zr(r,c).then(function(m){if(m.TAG===0){var p=m._0;d(i,function(v){return ne(v,function(x){return x.unshift(p),x})}),d(s,function(v){return y("")})}else d(s,M);return Promise.resolve(void 0)}),function(m){return d(s,M),Promise.resolve(void 0)})),u.preventDefault(),u.stopPropagation()}},"Post Comment")))}var aa=na;function ia(e){var r=e.article;return E(_(_(R(r),function(n){return n.author}),function(n){var i=n.image,a=i===""?t.exports.createElement("img",void 0):t.exports.createElement("img",{src:i});return t.exports.createElement(N,{onClick:w(Y(n.username)),children:a})}),null)}var It=ia;function oa(e){var r=e.isBusy,n=e.onClick;return t.exports.createElement(Ee.make,{className:"btn btn-outline-danger btn-sm",style:{marginLeft:"5px"},onClick:n,children:null},t.exports.createElement("i",{className:r?"ion-load-a":"ion-trash-a",style:{marginRight:"5px"}}),"Delete Article")}var Ot=oa;function sa(e){var r=e.data,n=e.onClick,i,a=0;typeof r=="number"||r.TAG!==1?a=1:i=n,a===1&&(i=we(function(l){}));var s;if(typeof r=="number")s=null;else{var o=r._0;s=(o[1]?"Unfollow":"Follow")+" "+o[0]}return t.exports.createElement(Ee.make,{className:typeof r=="number"||!r._0[1]?"btn btn-sm btn-outline-secondary":"btn btn-sm btn-secondary",onClick:i,children:null},t.exports.createElement("i",{className:le(r)?"ion-load-a":"ion-plus-round",style:{marginRight:"5px"}}),s)}var Mt=sa;function ua(e){var r=e.data,n=e.onClick,i,a=0;typeof r=="number"||r.TAG!==1?a=1:i=n,a===1&&(i=we(function(l){}));var s;if(typeof r=="number")s=null;else{var o=r._0;s=t.exports.createElement(t.exports.Fragment,void 0,o[0]?"Unfavorite Article ":"Favorite Article ",t.exports.createElement("span",{className:"counter"},"("+String(o[1])+")"))}return t.exports.createElement(Ee.make,{className:typeof r=="number"||!r._0[0]?"btn btn-sm btn-outline-primary":"btn btn-sm btn-primary",style:{marginLeft:"5px"},onClick:i,children:null},t.exports.createElement("i",{className:le(r)?"ion-load-a":"ion-heart",style:{marginRight:"5px"}}),s)}var qt=ua;function la(e){var r=e.slug,n=e.user,i=Ct(r),a=ne(i[0],function(b){return b[0]}),s=gn(r),o=xn(a,n),l=o[1],c=o[0],f=An(a,n),u=f[1],m=f[0],p=En(a,n),v=p[1],x=p[0],G;if(n!==void 0&&typeof a!="number")if(a.TAG===0){var D=a._0;G=D.TAG===0?n.username===D._0.author.username:!1}else{var L=a._0;G=L.TAG===0?n.username===L._0.author.username:!1}else G=!1;var C,B=0,V;if(typeof a=="number")C=a===0?t.exports.createElement(ke,{}):t.exports.createElement(ke,{});else if(a.TAG===0){var Q=a._0;Q.TAG===0?(V=Q._0.body,B=1):C="ERROR"}else{var Z=a._0;Z.TAG===0?(V=Z._0.body,B=1):C="ERROR"}B===1&&(C=t.exports.createElement("div",{dangerouslySetInnerHTML:{__html:Yn(V)}}));var F;if(typeof a=="number")F=null;else if(a.TAG===0){var ee=a._0;F=ee.TAG===0?t.exports.createElement(Ft,{data:ee._0.tagList}):null}else{var te=a._0;F=te.TAG===0?t.exports.createElement(Ft,{data:te._0.tagList}):null}return t.exports.createElement("div",{className:"article-page"},t.exports.createElement("div",{className:"banner"},t.exports.createElement("div",{className:"container"},t.exports.createElement("h1",void 0,E(_(_(R(a),function(b){return b.title}),function(b){return b}),null)),t.exports.createElement("div",{className:"article-meta"},t.exports.createElement(It,{article:a}),t.exports.createElement("div",{className:"info"},t.exports.createElement(Ut,{article:a}),t.exports.createElement("span",{className:"date"},t.exports.createElement(Lt,{article:a}))),G?t.exports.createElement(Bt,{data:a}):t.exports.createElement(Mt,{data:c,onClick:l}),G?t.exports.createElement(Ot,{isBusy:x,onClick:v}):t.exports.createElement(qt,{data:m,onClick:u})))),t.exports.createElement("div",{className:"container page"},t.exports.createElement("div",{className:"row article-content"},t.exports.createElement("div",{className:"col-md-12"},t.exports.createElement("div",{style:{marginBottom:"2rem"}},C),F)),t.exports.createElement("hr",void 0),t.exports.createElement("div",{className:"article-actions"},t.exports.createElement("div",{className:"article-meta"},t.exports.createElement(It,{article:a}),t.exports.createElement("div",{className:"info"},t.exports.createElement(Ut,{article:a}),t.exports.createElement("span",{className:"date"},t.exports.createElement(Lt,{article:a}))),G?t.exports.createElement(Bt,{data:a}):t.exports.createElement(Mt,{data:c,onClick:l}),G?t.exports.createElement(Ot,{isBusy:x,onClick:v}):t.exports.createElement(qt,{data:m,onClick:u}))),t.exports.createElement("div",{className:"row"},t.exports.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},n!==void 0?t.exports.createElement(aa,{slug:r,image:E(n.image,""),setComments:s[3]}):t.exports.createElement("p",void 0,t.exports.createElement(N,{className:"nav-link",onClick:w(Oe),children:"Sign in"})," or ",t.exports.createElement(N,{className:"nav-link",onClick:w(ue),children:"sign up"})," to add comments on this article."),t.exports.createElement(ea,{slug:r,data:s[0],user:n,onDeleteClick:s[2],busy:s[1]})))))}var ca=la;function da(e){var r=e.viewMode,n=e.user,i=kn(r),a=i[0],s=a._0,o=_n(s),l=mn(a),c=l[0],f=hn(o,n),u=f[0],m=wt(l[1],n),p=m[1],v=m[0],x=pe(c),G;if(typeof o=="number")G="...";else if(o.TAG===0){var D=o._0;G=D.TAG===0?D._0.username:"..."}else{var L=o._0;G=L.TAG===0?L._0.username:"..."}var C,B=0,V;if(typeof o=="number")C=null;else if(o.TAG===0){var Q=o._0;Q.TAG===0?(V=Q._0,B=1):C=null}else{var Z=o._0;Z.TAG===0?(V=Z._0,B=1):C=null}B===1&&(C=E(_(V.bio,function(k){return k}),null));var F,ee=0;if(typeof o=="number"?F=null:(o.TAG===0,o._0.TAG===0?ee=1:F=null),ee===1){var te,b=0;if(typeof u=="number"||u.TAG!==1)b=2;else{var q=u._0[0];te=E(A(n,function(k){if(k.username===q)return w(Nt)}),f[1])}b===2&&(te=we(function(k){}));var ye,Pe=0;if(typeof u=="number")u===0?ye=t.exports.createElement("i",{className:"ion-plus-round",style:{marginRight:"3px"}}):Pe=2;else if(u.TAG===0)Pe=2;else{var Vt=u._0[0];ye=E(A(n,function(k){if(k.username===Vt)return P(t.exports.createElement("i",{className:"ion-gear-a",style:{marginRight:"3px"}}))}),t.exports.createElement("i",{className:"ion-plus-round",style:{marginRight:"3px"}}))}Pe===2&&(ye=t.exports.createElement("i",{className:"ion-load-a",style:{marginRight:"3px"}}));var De;if(typeof u=="number")De="...";else{var Je=u._0,He=Je[0];De=E(A(n,function(k){if(k.username===He)return"Edit Profile Settings"})," "+(Je[1]?"Unfollow":"Follow")+" "+He)}F=t.exports.createElement(Ee.make,{className:typeof u=="number"||!u._0[1]?"btn btn-sm btn-outline-secondary action-btn":"btn btn-sm btn-secondary action-btn",onClick:te,disabled:pe(u),children:null},ye,De)}var Ve;Ve=a.TAG===0?"nav-link active":"nav-link";var je=!1;if(!x){var ze;ze=a.TAG!==0,je=ze}var Ke;Ke=a.TAG===0?"nav-link":"nav-link active";var We=!1;if(!x){var Ye;Ye=a.TAG===0,We=Ye}var ge,$e=0,be;if(typeof c=="number")ge=null;else if(c.TAG===0){var Xe=c._0;Xe.TAG===0?(be=Xe._0,$e=1):ge="ERROR"}else{var Qe=c._0;Qe.TAG===0?(be=Qe._0,$e=1):ge="ERROR"}return $e===1&&(ge=t.exports.createElement(t.exports.Fragment,void 0,be.articles.map(function(k){var Ze=st(v,k.slug),et=k.author.image,jt=et===""?t.exports.createElement("img",void 0):t.exports.createElement("img",{src:et}),tt=k.tagList;return t.exports.createElement("div",{key:k.slug,className:"article-preview"},t.exports.createElement("div",{className:"article-meta"},t.exports.createElement(N,{onClick:w(Y(k.author.username)),children:jt}),t.exports.createElement("div",{className:"info"},t.exports.createElement(N,{className:"author",onClick:w(Y(k.author.username)),children:k.author.username}),t.exports.createElement("span",{className:"date"},Be(k.createdAt))),t.exports.createElement(Ee.make,{className:k.favorited?"btn btn-primary btn-sm pull-xs-right":"btn btn-outline-primary btn-sm pull-xs-right",onClick:we(function(Re){return d(p,k.favorited?{TAG:1,_0:k.slug}:{TAG:0,_0:k.slug})}),disabled:Ze,children:null},t.exports.createElement("i",{className:Ze?"ion-load-a":"ion-heart",style:{marginRight:"3px"}}),String(k.favoritesCount))),t.exports.createElement(N,{className:"preview-link",onClick:w(Ie(k.slug)),children:null},t.exports.createElement("h1",void 0,k.title),t.exports.createElement("p",void 0,k.description),t.exports.createElement("span",void 0,"Read more..."),tt.length!==0?t.exports.createElement("ul",{className:"tag-list"},tt.map(function(Re){return t.exports.createElement("li",{key:Re,className:"tag-default tag-pill tag-outline"},Re)})):null))}),t.exports.createElement(Pt,{limit:a._1,offset:a._2,total:be.articlesCount,onClick:pe(c)?function(k){}:i[1]}))),t.exports.createElement("div",{className:"profile-page"},t.exports.createElement("div",{className:"user-info"},t.exports.createElement("div",{className:"container"},t.exports.createElement("div",{className:"row"},t.exports.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},E(_(A(R(o),function(k){if(k.image!=="")return k.image}),function(k){return t.exports.createElement("img",{className:"user-img",src:k})}),t.exports.createElement("img",{className:"user-img"})),t.exports.createElement("h4",void 0,G),C,F)))),t.exports.createElement("div",{className:"container"},t.exports.createElement("div",{className:"row"},t.exports.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},t.exports.createElement("div",{className:"articles-toggle"},t.exports.createElement("ul",{className:"nav nav-pills outline-active"},t.exports.createElement("li",{className:"nav-item"},t.exports.createElement(N,{className:Ve,onClick:bt(je,{TAG:0,_0:Y(s)}),children:"My Articles"})),t.exports.createElement("li",{className:"nav-item"},t.exports.createElement(N,{className:Ke,onClick:bt(We,{TAG:0,_0:an(s)}),children:"Favorited Articles"})),pe(c)?t.exports.createElement("li",{className:"nav-item"},t.exports.createElement(ke,{})):null)),ge))))}var Jt=da,Ht=[{username:"",email:"",password:""},void 0];function fa(e){var r=e.setUser,n=t.exports.useState(function(){return y(Ht)}),i=n[1],a=n[0],s=le(a),o=E(X(a),Ht),l=o[1],c=o[0];return t.exports.createElement("div",{className:"auth-page"},t.exports.createElement("div",{className:"container page"},t.exports.createElement("div",{className:"row"},t.exports.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},t.exports.createElement("h1",{className:"text-xs-center"},"Sign up"),t.exports.createElement("p",{className:"text-xs-center"},t.exports.createElement(N,{onClick:w(Oe),children:"Have an account?"})),l!==void 0?t.exports.createElement("ul",{className:"error-messages"},t.exports.createElement(z,{label:"email",error:l.email}),t.exports.createElement(z,{label:"password",error:l.password}),t.exports.createElement(z,{label:"username",error:l.username})):null,t.exports.createElement("form",void 0,t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control form-control-lg",disabled:s,placeholder:"Your Name",type:"text",value:c.username,onChange:function(f){var u=f.target.value;return d(i,function(m){return U(m,function(p){var v=p[0];return[{username:u,email:v.email,password:v.password},p[1]]})})}})),t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control form-control-lg",disabled:s,placeholder:"Email",type:"text",value:c.email,onChange:function(f){var u=f.target.value;return d(i,function(m){return U(m,function(p){var v=p[0];return[{username:v.username,email:u,password:v.password},p[1]]})})}})),t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control form-control-lg",disabled:s,placeholder:"Password",type:"password",value:c.password,onChange:function(f){var u=f.target.value;return d(i,function(m){return U(m,function(p){var v=p[0];return[{username:v.username,email:v.email,password:u},p[1]]})})}})),t.exports.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",disabled:s,onClick:function(f){if(f.preventDefault(),f.stopPropagation(),!s){d(i,re),rn(c.username,c.email,c.password).then(function(u){if(u.TAG===0){var m=u._0;d(r,function(D){return y(m)}),d(i,M),lt("jwtToken",m.token),se(ie)}else{var p=u._0;if(p.TAG===0){var v=p._0[2];if(v.NAME==="text")d(i,M);else try{var x=Lr.decode(g(h(g(S(v.VAL)),"errors")));if(x.TAG===0){var G=x._0;d(i,function(D){return U(M(D),function(L){return[L[0],G]})})}}catch{console.log("Button.UpdateSettings: failed to decode json")}}else d(i,M)}return Promise.resolve(void 0)});return}}},"Sign up"))))))}var ma=fa;function va(e){var r=e.user,n=e.setUser,i=t.exports.useState(function(){return y([r,"",void 0])}),a=i[1],s=i[0],o=le(s),l=E(X(s),[r,"",void 0]),c=l[2],f=l[0];return t.exports.createElement("div",{className:"settings-page"},t.exports.createElement("div",{className:"container page"},t.exports.createElement("div",{className:"row"},t.exports.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},t.exports.createElement("h1",{className:"text-xs-center"},"Your Settings"),c!==void 0?t.exports.createElement("ul",{className:"error-messages"},t.exports.createElement(z,{label:"email",error:c.email}),t.exports.createElement(z,{label:"bio",error:c.bio}),t.exports.createElement(z,{label:"image",error:c.image}),t.exports.createElement(z,{label:"username",error:c.username}),t.exports.createElement(z,{label:"password",error:c.password})):null,t.exports.createElement("form",void 0,t.exports.createElement("fieldset",void 0,t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control",disabled:o,placeholder:"URL of profile picture",type:"text",value:E(f.image,""),onChange:function(u){var m=u.target.value;return d(a,function(p){return U(p,function(v){var x=v[0];return[{id:x.id,email:x.email,createdAt:x.createdAt,updatedAt:x.updatedAt,username:x.username,bio:x.bio,image:m,token:x.token},v[1],v[2]]})})}})),t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control form-control-lg",disabled:o,placeholder:"Your Name",type:"text",value:f.username,onChange:function(u){var m=u.target.value;return d(a,function(p){return U(p,function(v){var x=v[0];return[{id:x.id,email:x.email,createdAt:x.createdAt,updatedAt:x.updatedAt,username:m,bio:x.bio,image:x.image,token:x.token},v[1],v[2]]})})}})),t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("textarea",{className:"form-control form-control-lg",disabled:o,placeholder:"Short bio about you",rows:8,value:E(f.bio,""),onChange:function(u){var m=u.target.value;return d(a,function(p){return U(p,function(v){var x=v[0];return[{id:x.id,email:x.email,createdAt:x.createdAt,updatedAt:x.updatedAt,username:x.username,bio:m,image:x.image,token:x.token},v[1],v[2]]})})}})),t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control form-control-lg",disabled:o,placeholder:"Email",type:"text",value:f.email,onChange:function(u){var m=u.target.value;return d(a,function(p){return U(p,function(v){var x=v[0];return[{id:x.id,email:m,createdAt:x.createdAt,updatedAt:x.updatedAt,username:x.username,bio:x.bio,image:x.image,token:x.token},v[1],v[2]]})})}})),t.exports.createElement("fieldset",{className:"form-group"},t.exports.createElement("input",{className:"form-control form-control-lg",disabled:o,placeholder:"Password",type:"password",value:l[1],onChange:function(u){var m=u.target.value;return d(a,function(p){return U(p,function(v){return[v[0],m,v[2]]})})}})),t.exports.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",disabled:o,onClick:function(u){u.preventDefault(),u.stopPropagation(),cn(s,function(m){d(a,re),Yr(m[0],m[1]).then(function(p){if(p.TAG===0){var v=p._0;d(a,function(C){return U(M(C),function(B){return[v,"",void 0]})}),d(n,function(C){return U(C,function(B){return v})})}else{var x=p._0;if(x.TAG===0){var G=x._0[2];if(G.NAME!=="text")try{var D=wr.decode(g(h(g(S(G.VAL)),"errors")));if(D.TAG===0){var L=D._0;d(a,function(C){return U(M(C),function(B){return[B[0],"",L]})})}}catch{console.log("Button.UpdateSettings: failed to decode json")}}}return Promise.resolve(void 0)})})}},"Update Settings"))),t.exports.createElement("hr",void 0),t.exports.createElement("button",{className:"btn btn-outline-danger",disabled:o,onClick:function(u){if(u.preventDefault(),u.stopPropagation(),!o)return d(n,function(m){return y(void 0)}),xr("jwtToken"),se(ie)}},"Or click here to logout.")))))}var pa=va;function qe(e,r){return r!==void 0?d(e,r):(se(ie),null)}function ga(e){var r=pn(),n=r[1],i=r[0],a=Bn();if(typeof i=="number")return null;var s=i._0,o;if(typeof a=="number")switch(a){case 0:o=t.exports.createElement(Ln,{user:s});break;case 1:o=t.exports.createElement(Un,{setUser:n});break;case 2:o=t.exports.createElement(ma,{setUser:n});break;case 3:o=qe(function(c){return t.exports.createElement(Rt,{})},s);break;case 4:o=qe(function(c){return t.exports.createElement(pa,{user:c,setUser:n})},s);break}else switch(a.TAG|0){case 0:var l=a._0;o=qe(function(c){return t.exports.createElement(Rt,{slug:l})},s);break;case 1:o=t.exports.createElement(ca,{slug:a._0,user:s});break;case 2:o=t.exports.createElement(Jt,{viewMode:{TAG:0,_0:a._0,_1:10,_2:0},user:s});break;case 3:o=t.exports.createElement(Jt,{viewMode:{TAG:1,_0:a._0,_1:10,_2:0},user:s});break}return t.exports.createElement(t.exports.Fragment,void 0,t.exports.createElement(Kn,{user:s}),o,t.exports.createElement(jn,{}))}var xa=ga;ur.exports.render(t.exports.createElement(t.exports.StrictMode,{children:t.exports.createElement(xa,{})}),g(lr(document.querySelector("#root"))));
